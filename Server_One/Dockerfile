FROM php:7.4-apache


#Primo sottodominio
COPY sub/subDomain.conf /etc/apache2/sites-available/
#Secondo sottodominio
COPY subTwo/subTwoDomain.conf /etc/apache2/sites-available/
COPY 000-default.conf /etc/apache2/sites-available/
#modulo per le riquest e response HTTP
RUN a2enmod headers

# Variabile d'ambiente docker per il nome del dominio
# Definisci un nome di dominio e cambialo nel DNS locale
# parsa 127.0.0.1 hostone.dagg
ENV VIRTUAL_HOST=hostone.dagg

# Imposta la directory di lavoro corrente
WORKDIR /etc/apache2/sites-available
# Abilita i Virtual Hosting con le configurazioni e riavvia apache
RUN a2ensite subDomain.conf && service apache2 restart 
RUN a2ensite subTwoDomain.conf && service apache2 restart 

#COPY . /var/www/html/

#crea un volume persistente per il contenuto del sito web 
# docker-compose down --volumes ServerOne
VOLUME /var/www/html/