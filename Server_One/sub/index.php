<?php
// Elabora la richiesta come desiderato
$response = "Risposta dal sottodominio";

// Imposta l'header CORS per consentire la comunicazione dal dominio principale. 
// Configuriamo per includere l'header Access-Control-Allow-Origin nella sua risposta, specificando il dominio consentito (http://hostone.dagg:8001). 
header("Access-Control-Allow-Origin: http://hostone.dagg:8001");

// Invia la risposta al dominio principale
echo $response;

?>



<!DOCTYPE html>
<html>
    <head lang="en">
        <title> SUB-DOMAIN HOST One</title>
        <meta charset="utf-8"> 
        <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline'">
    </head>

    <body>
        <h1>Home Page del SOTTODOMINIO Server <h1 style="color: rgb(255, 225, 0);"> SUBDOMAIN ONE </h1></h1>
        <p>
            <ul>
                <li>(Alert eseguito) Se imposrto il sottodominio con iframe si esegue anche JS perché pare che con i frame questo venga considerato tutto allo stesso livello</li>
                <li>(Alert non più eseguito) Per bloccare questa cosa ho specvificato con l'attributo sandbox che si possono eseguire solo le cose a livello dello stesso dominio</li>
                <li>Esempio di chiamata con XMLResponse bloccata da SOP per il sottodominio </li>
            </ul>
        </p>
        <script> 
            alert("Js inline eseguito dalla main page del sottodominio");
            window.document.write("JS eseguito nell'index del sottodominio"); 
        </script>
        
        <iframe src="http://subtwo.hostone.dagg:8001/" width="1000px" height="500px"></iframe>
        
    </body>
</html>