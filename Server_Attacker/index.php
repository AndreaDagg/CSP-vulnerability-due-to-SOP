<php  
<?php

// Crea un server in ascolto sulla porta 8003
$server = stream_socket_server("tcp://127.0.0.1:8044", $errno, $errorMessage);

if ($server === false) {
    die("Impossibile avviare il server: $errorMessage");
}

echo "Server in ascolto su http://127.0.0.1:8044/" . PHP_EOL;

// Accetta le connessioni in entrata e gestisce le richieste
while (true) {
    // Accetta una connessione
    $client = stream_socket_accept($server);

    // Leggi i dati inviati dal client
    $requestData = stream_get_contents($client);

    // Elabora i dati ricevuti
    echo "Dati ricevuti: $requestData" . PHP_EOL;

    // Invia una risposta al client
    $response = "HTTP/1.1 200 OK\r\n";
    $response .= "Content-Type: text/plain\r\n";
    $response .= "Content-Length: " . strlen("Richiesta ricevuta con successo") . "\r\n";
    $response .= "\r\n";
    $response .= "Richiesta ricevuta con successo";

    fwrite($client, $response);
    fclose($client);
}


?>
<html>  
<head>
    <title>Server_Attacker</title>
</head>
<body>
    <h1>Server_Attacker</h1>
    <p>Server_Attacker</p>
</body>
</html>
